<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Hidrostática - Empuxo (SVG Boat)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1200px;
            margin: 20px;
            background: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        /* --- Coluna de Simulação Visual --- */
        .visualizer {
            flex: 2; /* Ocupa 2/3 da largura */
            min-width: 400px;
            height: 600px;
            background: #cceeff; /* Céu */
            position: relative;
            overflow: hidden; /* Esconde o que sai do quadro */
        }
        .water {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%; /* A linha da água está na metade */
            background: #004080; /* Água escura */
            opacity: 0.9;
        }
        .boat-container {
            position: absolute;
            width: 150px; /* Largura VISUAL do barco (para o SVG) */
            height: 150px; /* Altura VISUAL do barco (para o SVG) */
            left: 50%;
            /* 'bottom' será controlado pelo JS */
            bottom: 50%; /* Começa na linha da água */
            transform: translateX(-50%);
            transition: bottom 0.5s ease;
            z-index: 10; /* Garante que o barco fica acima da água */
        }
        
        /* Estilos para o SVG do barco */
        .boat-svg {
            width: 100%;
            height: 100%;
            /* viewBox define as coordenadas internas do SVG, importante para escalabilidade */
            /* Se o barco não estiver centralizado, ajuste os valores do viewBox e/ou das formas */
        }
        .boat-svg .casco {
            fill: #FFFFFF; /* Branco */
            stroke: #333; /* Contorno */
            stroke-width: 2;
        }
        .boat-svg .mastro {
            fill: #333; /* Preto */
        }
        .boat-svg .vela1 {
            fill: #FF8C00; /* Laranja */
            stroke: #333;
            stroke-width: 1;
        }
        .boat-svg .vela2 {
            fill: #FFD700; /* Amarelo */
            stroke: #333;
            stroke-width: 1;
        }

        .bottom-floor {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: #6b4a2f; /* Fundo do "aquário" */
        }

        /* --- Coluna de Controles e Resultados --- */
        .simulator {
            flex: 1; /* Ocupa 1/3 da largura */
            min-width: 300px;
            padding: 20px;
            background: #f9f9f9;
        }
        .controls h3 {
            margin-top: 0;
            color: #004080;
        }
        .control-group {
            margin-bottom: 20px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .control-group input[type="range"] {
            width: 100%;
        }
        .control-group span {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.1em;
            color: #d9534f;
        }
        
        #results {
            margin-top: 20px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }
        #results h3 {
            color: #007bff;
        }
        #results p {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: "Courier New", Courier, monospace;
            line-height: 1.6;
            word-wrap: break-word;
            font-size: 0.95em;
        }
        #results p strong {
            color: #d9534f;
        }
        #results p i {
            color: #555;
            font-size: 0.9em;
        }
        .status-float { color: #28a745; font-weight: bold; }
        .status-sink { color: #dc3545; font-weight: bold; }

    </style>
</head>
<body>

    <div class="container">
        
        <div class="visualizer" id="visualizer">
            <div class="water" id="water"></div>
            <div class="bottom-floor"></div>
            <div class="boat-container" id="boat">
                <svg class="boat-svg" viewBox="0 -20 100 100">
                    <path class="casco" d="M10 70 Q20 85 50 85 Q80 85 90 70 L85 65 Q75 55 50 55 Q25 55 15 65 Z" />
                    <rect class="mastro" x="48" y="20" width="4" height="40" />
                    <polygon class="vela1" points="50,25 75,60 50,60" />
                    <polygon class="vela2" points="50,25 25,60 50,60" />
                </svg>
            </div>
        </div>

        <div class="simulator">
            <div class="controls">
                <h3>Controles da Simulação</h3>
                
                <div class="control-group">
                    <label for="mass-slider">Massa do Barco: 
                        <span id="mass-value">5000</span> kg</label>
                    <input type="range" id="mass-slider" min="1000" max="30000" value="5000" step="100">
                </div>
                
                <div class="control-group">
                    <label for="density-slider">Densidade do Líquido: 
                        <span id="density-value">1000</span> kg/m³</label>
                    <input type="range" id="density-slider" min="800" max="13600" value="1000" step="10">
                    <i>(Água Doce: 1000, Água Salgada: ~1025, Mercúrio: 13600)</i>
                </div>
                
                <p><i>Nota: Para a física, o barco é um bloco de 
                   <strong id="boat-dims">--</strong> m. A imagem é ilustrativa.</i></p>
            </div>

            <div id="results">
                </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- CONSTANTES DA SIMULAÇÃO ---
            const g = 9.81; // Aceleração da gravidade (m/s²)
            
            // Dimensões do "bloco" (barco) para a FÍSICA
            const L_BARCO = 5.0; // Comprimento (m)
            const W_BARCO = 3.0; // Largura (m)
            const H_TOTAL_BARCO = 2.0; // Altura total (m)
            
            const AREA_BASE = L_BARCO * W_BARCO;
            const V_TOTAL_BARCO = AREA_BASE * H_TOTAL_BARCO;
            
            // --- Elementos do DOM ---
            const massSlider = document.getElementById('mass-slider');
            const densitySlider = document.getElementById('density-slider');
            const massValue = document.getElementById('mass-value');
            const densityValue = document.getElementById('density-value');
            
            const resultsDiv = document.getElementById('results');
            const boatContainer = document.getElementById('boat');
            const visualizer = document.getElementById('visualizer');
            const water = document.getElementById('water');
            
            // Seta as dimensões na UI
            document.getElementById('boat-dims').innerText = `${L_BARCO}x${W_BARCO}x${H_TOTAL_BARCO}`;

            // --- FUNÇÃO PRINCIPAL ---
            function updateSimulation() {
                // 1. Obter valores dos sliders
                const m_boat = parseFloat(massSlider.value);
                const d_fluid = parseFloat(densitySlider.value);
                
                // Atualizar labels
                massValue.innerText = m_boat;
                densityValue.innerText = d_fluid;
                
                // 2. Cálculos de Física (com etapas)
                let output = '<h3>Etapas do Cálculo (Princípio de Arquimedes)</h3>';
                
                // --- Peso do Barco ---
                const p_boat = m_boat * g;
                output += `<p><strong>1. Peso do Barco (P):</strong><br>
                           Fórmula: P = massa * gravidade (g)<br>
                           Cálculo: P = ${m_boat} kg * ${g} m/s²<br>
                           <strong>P = ${p_boat.toFixed(2)} N</strong></p>`;
                           
                // --- Empuxo Máximo Possível ---
                const e_max = d_fluid * V_TOTAL_BARCO * g;
                output += `<p><strong>2. Empuxo Máximo (E<sub>max</sub>):</strong><br>
                           <i>(Força se o barco estivesse 100% submerso)</i><br>
                           Fórmula: E<sub>max</sub> = d<sub>fluido</sub> * V<sub>total</sub> * g<br>
                           Cálculo: E<sub>max</sub> = ${d_fluid} * ${V_TOTAL_BARCO} * ${g}<br>
                           <strong>E<sub>max</sub> = ${e_max.toFixed(2)} N</strong></p>`;
                
                let h_submerso; // Altura submersa (calado)
                let status;

                // 3. Condição: Flutua ou Afunda?
                if (p_boat > e_max) {
                    // --- AFUNDA ---
                    status = `<span class="status-sink">AFUNDA</span>`;
                    output += `<p><strong>3. Condição:</strong><br>
                               Peso (${p_boat.toFixed(2)} N) > Empuxo Máximo (${e_max.toFixed(2)} N)<br>
                               <strong>Status: ${status}</strong><br>
                               <i>A densidade média do barco é maior que a do líquido.</i></p>`;
                    
                    h_submerso = H_TOTAL_BARCO; // Está 100% submerso
                    updateBoatVisual(h_submerso, true);

                } else {
                    // --- FLUTUA ---
                    status = `<span class="status-float">FLUTUA</span>`;
                    const e_necessario = p_boat; // Para flutuar, E = P
                    
                    output += `<p><strong>3. Condição:</strong><br>
                               Peso (${p_boat.toFixed(2)} N) &le; Empuxo Máximo (${e_max.toFixed(2)} N)<br>
                               <strong>Status: ${status}</strong><br>
                               <i>O barco afundará até que o Empuxo se iguale ao Peso.</i></p>`;
                    
                    // 4. Calcular Calado (Altura Submersa)
                    // E = d_fluido * V_submerso * g
                    // P = E  =>  p_boat = d_fluido * V_submerso * g
                    const v_submerso = p_boat / (d_fluid * g);
                    
                    // V_submerso = Area_base * h_submerso
                    h_submerso = v_submerso / AREA_BASE;
                    
                    output += `<p><strong>4. Cálculo do Calado (h<sub>submerso</sub>):</strong><br>
                               Volume necessário: V<sub>sub</sub> = P / (d<sub>fluido</sub> * g)<br>
                               Cálculo V<sub>sub</sub>: ${p_boat.toFixed(2)} / (${d_fluid} * ${g}) = ${v_submerso.toFixed(2)} m³<br>
                               Altura submersa: h<sub>sub</sub> = V<sub>sub</sub> / Área<sub>base</sub><br>
                               Cálculo h<sub>sub</sub>: ${v_submerso.toFixed(2)} / ${AREA_BASE} m²<br>
                               <strong>Calado (h<sub>sub</sub>): ${h_submerso.toFixed(2)} m</strong><br>
                               <i>(Altura total do barco: ${H_TOTAL_BARCO} m)</i></p>`;
                    
                    updateBoatVisual(h_submerso, false);
                }
                
                resultsDiv.innerHTML = output;
            }

            // --- FUNÇÃO DE ATUALIZAÇÃO VISUAL ---
            function updateBoatVisual(calado, afundou) {
                // Altura da área de água dentro do visualizador (em pixels)
                // Usamos offsetHeight porque pode variar com o redimensionamento
                const waterVisualHeightPx = water.offsetHeight; 
                
                // Altura visual total do elemento SVG do barco (em pixels)
                const boatVisualHeightPx = boatContainer.offsetHeight; 
                
                if (afundou) {
                    // O barco afundou completamente. Posicione-o no fundo do "aquário".
                    // A "bottom-floor" tem 20px de altura, então o barco fica 20px acima do fundo.
                    boatContainer.style.bottom = `20px`; 
                } else {
                    // O barco está flutuando.
                    
                    // Calcula a proporção da altura do barco que está submersa, 
                    // em relação à altura total FÍSICA do barco.
                    const percentSubmerged = (calado / H_TOTAL_BARCO);
                    
                    // Calcula quantos pixels da imagem VISUAL do barco devem estar submersos.
                    const submergedVisualPx = percentSubmerged * boatVisualHeightPx;
                    
                    // A linha d'água está na altura `waterVisualHeightPx` (medido de baixo para cima).
                    // Para que 'submergedVisualPx' do barco esteja abaixo dessa linha,
                    // o 'bottom' do barco deve ser `waterVisualHeightPx - submergedVisualPx`.
                    boatContainer.style.bottom = `${waterVisualHeightPx - submergedVisualPx}px`;
                }
            }

            // --- Event Listeners ---
            massSlider.addEventListener('input', updateSimulation);
            densitySlider.addEventListener('input', updateSimulation);

            // --- Inicialização ---
            updateSimulation(); 
        });
    </script>

</body>
</html>
