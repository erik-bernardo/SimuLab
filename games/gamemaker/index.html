<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ® Crie seu Jogo - SimuLab</title>
  <link rel="stylesheet" href="estilo.css" />
  <script src="script.js" defer></script>

  <!-- Fontes e Ã­cones -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/lucide-icons@latest"></script>

  <!-- Blockly opcional -->
  <script src="https://unpkg.com/blockly/blockly.min.js"></script>

  <meta name="description" content="Crie seu prÃ³prio jogo com cÃ³digo ou blocos visuais! Experimente, edite e execute em tempo real.">
</head>

<body>
  <!-- ================================= -->
  <!-- ğŸ¨ CABEÃ‡ALHO -->
  <!-- ================================= -->
  <header class="main-header">
    <h1>ğŸ® Crie seu Jogo</h1>
    <p>Escolha como deseja criar: <strong>por cÃ³digo</strong> ou <strong>por blocos</strong>.</p>
    <nav>
      <button id="modoCodigo" class="modo-btn ativo">ğŸ’» CÃ³digo</button>
      <button id="modoBlocos" class="modo-btn">ğŸ§© Blocos</button>
    </nav>
  </header>

  <!-- ================================= -->
  <!-- ğŸ§  CONTEÃšDO PRINCIPAL -->
  <!-- ================================= -->
  <main class="main-container">
    <section id="painelCodigo" class="painel ativo">
      <!-- Editor de CÃ³digo -->
      <div class="editor-container">
        <div class="editor-header">
          <span>Editor de Jogo (Linguagem Personalizada)</span>
          <button id="executarCodigo" class="executar-btn">
            â–¶ï¸ Executar Jogo
          </button>
        </div>

        <textarea id="editorCodigo" spellcheck="false">
// Bem-vindo ao Criador de Jogos!
// Digite seu cÃ³digo abaixo. Exemplo:

jogo.titulo("Meu Primeiro Jogo");
jogo.jogador("astronauta", { x: 50, y: 50, cor: "azul" });
jogo.inimigo("alien", { x: 200, y: 100, cor: "verde" });
jogo.loop(() => {
  jogador.moverDireita();
  if (jogador.colideCom("alien")) {
    jogo.mensagem("VocÃª venceu!");
  }
});
        </textarea>
      </div>
    </section>

    <!-- Modo Blocos -->
    <section id="painelBlocos" class="painel">
      <div id="blocosContainer"></div>
      <button id="gerarCodigo" class="gerar-btn">ğŸ”„ Converter para CÃ³digo</button>
    </section>

    <!-- ================================= -->
    <!-- ğŸ•¹ï¸ ÃREA DE EXECUÃ‡ÃƒO -->
    <!-- ================================= -->
    <section id="areaExecucao" class="exec-container">
      <div class="exec-header">
        <h2>ğŸ•¹ï¸ VisualizaÃ§Ã£o do Jogo</h2>
        <button id="limparTela" class="limpar-btn">ğŸ§¹ Limpar</button>
      </div>
      <iframe id="canvasExecucao"></iframe>
    </section>
  </main>

  <!-- ================================= -->
  <!-- ğŸ§© TOOLBOX DO BLOCKLY -->
  <!-- ================================= -->
  <xml id="toolbox" style="display: none">
    <category name="Movimento" colour="#5CA65C">
      <block type="mover_direita"></block>
      <block type="mover_esquerda"></block>
      <block type="mover_cima"></block>
      <block type="mover_baixo"></block>
    </category>

    <category name="AÃ§Ãµes" colour="#5C81A6">
      <block type="mostrar_mensagem"></block>
      <block type="criar_jogador"></block>
      <block type="criar_inimigo"></block>
    </category>

    <category name="Controle" colour="#A65C81">
      <block type="repetir_loop"></block>
      <block type="se_colisao"></block>
    </category>

    <category name="MatemÃ¡tica" colour="#A6745C">
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
    </category>

    <category name="LÃ³gica" colour="#5CA699">
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_boolean"></block>
    </category>
  </xml>

  <!-- ================================= -->
  <!-- âš™ï¸ RODAPÃ‰ -->
  <!-- ================================= -->
  <footer class="main-footer">
    <p>SimuLab Â© 2025 â€” Desenvolva, teste e divirta-se criando jogos!</p>
    <p>
      Dica: experimente criar scripts interativos e veja o resultado em tempo real.
    </p>
  </footer>

  <!-- ================================= -->
  <!-- ğŸ“¦ SCRIPTS DE SUPORTE OPCIONAL -->
  <!-- ================================= -->
  <script>
    // InicializaÃ§Ã£o de Ã­cones Lucide
    lucide.createIcons();

    // Alternar modo (CÃ³digo / Blocos)
    document.getElementById("modoCodigo").addEventListener("click", () => {
      document.getElementById("painelCodigo").classList.add("ativo");
      document.getElementById("painelBlocos").classList.remove("ativo");
      document.getElementById("modoCodigo").classList.add("ativo");
      document.getElementById("modoBlocos").classList.remove("ativo");
    });

    document.getElementById("modoBlocos").addEventListener("click", () => {
      document.getElementById("painelBlocos").classList.add("ativo");
      document.getElementById("painelCodigo").classList.remove("ativo");
      document.getElementById("modoBlocos").classList.add("ativo");
      document.getElementById("modoCodigo").classList.remove("ativo");
    });

    // Configurar Blockly
    window.addEventListener("load", () => {
      const workspace = Blockly.inject('blocosContainer', {
        toolbox: document.getElementById('toolbox'),
        scrollbars: true,
        trashcan: true,
        grid: { spacing: 25, length: 3, colour: '#ccc', snap: true }
      });

      document.getElementById("gerarCodigo").addEventListener("click", () => {
        const code = Blockly.JavaScript.workspaceToCode(workspace);
        document.getElementById("editorCodigo").value = code;
        alert("CÃ³digo gerado com sucesso!");
      });
    });
  </script>
</body>
</html>
